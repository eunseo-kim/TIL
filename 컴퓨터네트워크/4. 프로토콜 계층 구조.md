# 4. 프로토콜 계층 구조


## 🔍통신 프로토콜과 계층 구조

#### ✔통신 프로토콜

- **정의**
  - 서로 다른 기기들 간의 데이터 교환을 원활하게 수행할 수 있도록 표준화시켜 놓은 통신 규약
- **기본 요소**
  - ① 교환될 메시지의 형식 정의(Syntax)
  - ② 메시지 교환 순서 정의(Timing)
  - ③ 메시지 교환 시 수행할 행위 정의(Semantics)



#### ✔프로토콜의 계층 구조

- 로직을 세부 모듈로 나누어 별도의 계층으로 구현
- 하위 계층은 상위 계층에 서비스를 제공, 상위 계층은 하위 계층을 기반으로 수행
- 한 계층의 변화가 다른 계층에 영향을 미치지 않음



#### ✔계층 구조의 장단점

- **장점**
  - 새로운 프로토콜을 정의할 때 기존의 프로토콜을 기반으로 정의하기 때문에 **정의가 용이해짐**.
  - 특정 통신기능 or 서비스 수정이 용이해짐.
  - 각 계층을 분리함으로써 전체 시스템을 이해하기 용이해짐.
- **단점**
  - 최적 시스템 구현이 어려움
    - 하위 프로토콜을 기반으로 상위 프로토콜을 생성 시, 하위 프로토콜 기능 중 필요없는 기능들까지 포함해야 됨
    - 계층간 서비스 인터페이스를 구현해야 돼서 소프트웨어 크기가 커짐



> #### 💡프로토콜과 계층
>
> - **프로토콜**
>   - 특정 통신 서비스를 위한 정보 교환 규칙을 정의한 것
>   - 물리 매체 프로토콜: UTP, 광케이블, 무선 채널
>   - 인터넷 응용 프로토콜: HTTP(웹 서비스), SMTP(이메일 서비스)
> - **계층**
>   - 유사 프로토콜들의 집합
>   - 1개의 계층에 다수의 프로토콜도 Ok!

<br>

---

## 🔍계층 구조 모델: TCP / IP와 OSI

<img src="https://user-images.githubusercontent.com/67737432/134155281-5c64afda-db29-4d21-985f-b4d29a1c326c.png" width="50%">

#### ✔TCP / IP
- **Application: 응용 계층**
  - 인터넷 최종 사용자 서비스를 위한 정보 교환 규칙을 정의한다.

- **Transport: 트랜스포트 계층**
  - **응용 계층 프로토콜** 간에 메시지를 **작은 전송단위(Segment)로 나누고 전송**하는 규칙 정의
  - 전송 계층은 네트워크 혼잡 상황에 따라 패킷의 전송량을 조절하여 패킷의 흐름을 제어하고 
    패킷 전송의 오류를 점검해서 수신지 컴퓨터까지 패킷이 제대로 도착했는지 확인하는 역할을 한다.
    - **응용 프로토콜 지정**
    - **오류 제어**
    - **흐름 제어**
    - **혼잡 제어**
- **Network: 네트워크 계층**
  - 네트워크 상에서 최적 경로를 찾고,
  - 출발지 트랜스포트 **프로토콜의 전송단위(Segment)를 네트워크 전달 단위인 데이터그램(Datagram)으로 변환**.
- **Link: 링크 계층**
  - 네트워크 경로를 구성하는 각 링크 상에서,
    **네트워크 전송단위(데이터그램)을 프레임(Frame)으로 변환**하고,
    이를 각 링크의 끝까지 전송하는 규칙 정의
  - 유선 LAN - 이더넷,
    무선 LAN - WiFi,
    전용 회선 - PPP



#### ✔OSI 프리젠테이션 계층(Presentation layer)

- **정의**
  - 응용 프로토콜이 교환하는 정보의 의미를 **동일하게 해석하도록 표현하는 규칙** 정의
  - 데이터 표현, 압축(Compression) 방식, 암호(Encryption) 방식
  -  TCP/IP 구조에서는 **필요한 경우** 응용 프로토콜에서 정의 (**OSI가 모든 응용 프로토콜 영역에서 꼭 필요한것은 아님**)

- **OSI 세션 계층**
  - **세션 체크 포인트 및 복구**를 담당하여 다른 스트림의 정보를 적절하게 결합하거나 동기화 가능

<br>

---
## 🔍캡슐화

#### ✔프로토콜 교환 정보

- 데이터 정보(Data information) : 사용자가 통신 상대방 사용자에게 **전송을 의뢰한 정보**
- 제어 정보(Control information) : 프로토콜의 규칙을 수행하기 위해 **상대방 프로토콜에게 제공하는 정보**



#### ✔캡슐화

- 송신 데이터에 필요한 정보 (헤더) 를 붙여서 다음 계층에 보내는 기술
- 헤더(Header)
  - 데이터의 내용이나 성격을 식별하거나 제어하는 데 사용됨

> ![image](https://user-images.githubusercontent.com/67737432/134179350-65a8151d-050b-461c-a6b0-539f6b7e3df7.png)
>
> - PN: Port Number, HTTP/FTP 중 어디에 보낼 지 식별
> - SN: Sequence Numver, 순서 번호(오류 복구를 위한 제어 정보/몇번째 패킷인지?)



